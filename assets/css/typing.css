/* assets/css/typing.css */

/* =========================================
   1. CONTAINER CHÍNH (Đồng bộ tips.css)
   ========================================= */
.typing-container {
    width: 90%; /* Chiều rộng chiếm 90% màn hình */
    max-width: 1200px; /* Giới hạn chiều rộng tối đa là 1200px */
    margin: 0 auto; /* Căn giữa container */
    padding-top: 50px; /* Khoảng cách phía trên (tránh header) */
    padding-bottom: 80px; /* Khoảng cách phía dưới */
    position: relative; /* Thiết lập vị trí tương đối */
    z-index: 10; /* Đặt lớp hiển thị cao hơn nền */
    display: flex; /* Sử dụng Flexbox */
    flex-direction: column; /* Sắp xếp các phần tử theo cột dọc */
    gap: 30px; /* Khoảng cách giữa các khối con */
}

/* =========================================
   2. THANH CHỌN CHẾ ĐỘ (SELECTION BAR)
   ========================================= */
.selection-bar {
    display: flex; /* Sử dụng Flexbox */
    justify-content: center; /* Căn giữa nội dung theo chiều ngang */
    animation: fadeInDown 0.8s ease; /* Hiệu ứng hiện dần từ trên xuống */
}

.mode-tabs {
    background: rgba(30, 41, 59, 0.7); /* Màu nền tối có độ trong suốt */
    backdrop-filter: blur(10px); /* Hiệu ứng làm mờ nền phía sau */
    border: 1px solid rgba(255, 255, 255, 0.08); /* Viền mỏng màu trắng mờ */
    padding: 8px; /* Khoảng cách đệm bên trong */
    border-radius: 50px; /* Bo tròn viền hình viên thuốc */
    display: flex; /* Sử dụng Flexbox */
    gap: 10px; /* Khoảng cách giữa các tab */
    box-shadow: 0 10px 30px rgba(0,0,0,0.2); /* Đổ bóng nhẹ */
}

.tab-btn {
    background: transparent; /* Nền trong suốt */
    border: none; /* Bỏ viền mặc định */
    color: #94a3b8; /* Màu chữ xám nhạt */
    padding: 8px 20px; /* [Thu gọn] Nút nhỏ hơn */
    border-radius: 40px; /* Bo tròn nút */
    font-size: 0.9rem; /* [Thu gọn] Chữ nhỏ hơn */
    font-weight: 600; /* Độ đậm chữ */
    cursor: pointer; /* Con trỏ chuột dạng tay */
    transition: all 0.3s ease; /* Hiệu ứng chuyển đổi mượt mà */
}

.tab-btn:hover {
    color: white; /* Đổi màu chữ sang trắng khi di chuột */
    background: rgba(255,255,255,0.05); /* Nền sáng nhẹ khi di chuột */
}

.tab-btn.active {
    background: linear-gradient(135deg, #38bdf8, #0ea5e9); /* Nền gradient xanh khi kích hoạt */
    color: #0f172a; /* Màu chữ tối tương phản */
    box-shadow: 0 4px 15px rgba(56, 189, 248, 0.4); /* Đổ bóng xanh phát sáng */
}

/* =========================================
   3. THANH ĐIỀU KHIỂN & THỐNG KÊ (STATS BAR)
   ========================================= */
.nav-controls {
    display: flex; /* Sử dụng Flexbox */
    justify-content: center; /* Căn giữa các nút điều khiển */
    gap: 15px; /* Khoảng cách giữa các nút */
}

.nav-control-btn {
    background: rgba(30, 41, 59, 0.7); /* Nền tối mờ */
    border: 1px solid rgba(255,255,255,0.1); /* Viền trắng mờ */
    color: #cbd5e1; /* Màu chữ xám sáng */
    padding: 8px 15px; /* [Thu gọn] Nút nhỏ hơn */
    border-radius: 12px; /* Bo góc nhẹ */
    cursor: pointer; /* Con trỏ chuột dạng tay */
    display: flex; /* Sử dụng Flexbox */
    align-items: center; /* Căn giữa nội dung dọc */
    gap: 8px; /* Khoảng cách giữa icon và chữ */
    transition: 0.3s; /* Hiệu ứng mượt mà */
    font-weight: 500; /* Độ đậm chữ trung bình */
}

.nav-control-btn:hover {
    border-color: #38bdf8; /* Đổi màu viền sang xanh khi hover */
    color: #38bdf8; /* Đổi màu chữ sang xanh */
    background: rgba(56, 189, 248, 0.1); /* Nền xanh nhạt */
}

/* Bảng thống kê (WPM, Time) */
.stats-bar {
    display: flex; /* Sử dụng Flexbox */
    justify-content: space-around; /* Chia đều khoảng cách các chỉ số */
    background: rgba(30, 41, 59, 0.7); /* Nền tối mờ */
    backdrop-filter: blur(5px); /* Làm mờ nền sau */
    border: 1px solid rgba(255, 255, 255, 0.05); /* Viền mỏng */
    border-radius: 20px; /* Bo góc bảng */
    padding: 10px 30px; /* [Thu gọn] Giảm đệm */
    box-shadow: 0 15px 40px rgba(0,0,0,0.2); /* Đổ bóng */
    margin-bottom: 5px; /* [Thu gọn] Giảm khoảng cách */
}

.stat-group {
    text-align: center; /* Căn giữa nội dung thống kê */
}

.stat-label { 
    font-size: 0.85rem; /* Kích thước chữ nhãn nhỏ */
    color: #94a3b8; /* Màu chữ xám */
    text-transform: uppercase; /* Chữ in hoa */
    letter-spacing: 1px; /* Khoảng cách các ký tự */
    margin-bottom: 5px; /* Khoảng cách dưới nhãn */
}

.stat-value {
    font-size: 2rem; /* [Thu gọn] Số nhỏ hơn chút */
    font-weight: 700; /* Chữ đậm */
    color: #38bdf8; /* Màu xanh chủ đạo */
    text-shadow: 0 0 20px rgba(56, 189, 248, 0.3); /* Hiệu ứng phát sáng chữ */
}

/* =========================================
   4. KHU VỰC GÕ (GAME AREA - MAIN CARD)
   ========================================= */
.typing-box-wrapper {
    background: rgba(15, 23, 42, 0.85); /* Nền tối đậm để làm nổi bật chữ */
    backdrop-filter: blur(10px); /* Làm mờ nền */
    border: 1px solid rgba(56, 189, 248, 0.2); /* Viền xanh nhẹ */
    border-radius: 24px; /* Bo góc lớn */
    padding: 30px; /* [Thu gọn] Giảm đệm */
    position: relative; /* Vị trí tương đối */
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4); /* Đổ bóng sâu */
    min-height: 160px; /* [Thu gọn] Giảm chiều cao tối thiểu */
    display: flex; /* Flexbox để căn giữa nội dung */
    align-items: center; /* Căn giữa dọc */
    justify-content: center; /* Căn giữa ngang */
    transition: border-color 0.3s; /* Hiệu ứng đổi màu viền */
}

.typing-box-wrapper:focus-within {
    border-color: #38bdf8; /* Sáng viền xanh khi đang gõ */
    box-shadow: 0 0 30px rgba(56, 189, 248, 0.15); /* Phát sáng nhẹ */
}

.input-field {
    position: absolute; /* Vị trí tuyệt đối */
    opacity: 0; /* Ẩn hoàn toàn input */
    z-index: -1; /* Đưa xuống lớp dưới cùng */
}

/* Nội dung Text gõ */
.typing-box {
    font-family: 'Courier New', Courier, monospace; /* Font đơn cách để đều chữ */
    font-size: 1.6rem; /* [Thu gọn] Chữ vừa phải */
    line-height: 1.6; /* [Thu gọn] Dòng khít hơn */
    color: #64748b; /* Màu chữ chưa gõ (xám tối) */
    user-select: none; /* Không cho phép bôi đen */
    width: 100%; /* Chiều rộng tối đa */
    max-height: 120px; /* [Thu gọn] Chỉ hiện khoảng 3 dòng, JS sẽ tự cuộn */
    overflow: hidden; /* Ẩn thanh cuộn */
    white-space: pre-wrap; /* Giữ nguyên xuống dòng */
    word-break: break-word; /* Ngắt từ nếu quá dài */
}

/* Trạng thái từng ký tự */
.typing-box span {
    position: relative; /* Vị trí tương đối cho con trỏ */
    transition: color 0.1s; /* Hiệu ứng đổi màu nhanh */
}
.typing-box span.correct {
    color: #1eff0a; /* Màu trắng sáng cho chữ đúng */
    text-shadow: 0 0 2px rgb(9, 255, 0); /* Phát sáng nhẹ */
}
.typing-box span.incorrect {
    color: #f87171; /* Màu đỏ cho chữ sai */
    background: rgba(248, 113, 113, 0.15); /* Nền đỏ nhạt */
    border-radius: 4px; /* Bo góc nền đỏ */
}

/* Con trỏ nhấp nháy (Cursor) */
.typing-box span.active::before {
    content: ""; /* Nội dung giả */
    position: absolute; /* Vị trí tuyệt đối */
    /* [FIX LỖI] Xóa các thuộc tính thừa, chỉ giữ lại thanh dọc */
    left: 0; 
    bottom: 0; 
    height: 3px; 
    width: 100%; /* Thanh ngang dưới chân chữ */
    background-color: #38bdf8; /* Màu xanh neon */
    box-shadow: 0 0 10px #38bdf8; /* Phát sáng con trỏ */
    animation: blink 1s infinite; /* Hiệu ứng nhấp nháy */
}
@keyframes blink { 50% { opacity: 0; } } /* Animation ẩn hiện */

/* Overlay Click to Start */
.focus-overlay {
    position: absolute; /* Phủ lên trên wrapper */
    top: 0; left: 0; width: 100%; height: 100%; /* Chiếm toàn bộ diện tích */
    background: rgba(15, 23, 42, 0.6); /* Nền tối mờ */
    backdrop-filter: blur(3px); /* Làm mờ nội dung dưới */
    border-radius: 24px; /* Bo góc khớp wrapper */
    display: flex; /* Căn giữa thông báo */
    align-items: center; /* Căn giữa dọc */
    justify-content: center; /* Căn giữa ngang */
    cursor: pointer; /* Con trỏ tay */
    transition: opacity 0.3s; /* Hiệu ứng ẩn hiện */
    z-index: 20; /* Lớp trên cùng */
}
.focus-overlay.hidden {
    opacity: 0; /* Ẩn overlay */
    pointer-events: none; /* Không chặn click khi ẩn */
}
.start-msg {
    font-size: 1.5rem; /* Cỡ chữ thông báo */
    color: white; /* Màu chữ trắng */
    background: rgba(56, 189, 248, 0.2); /* Nền xanh trong suốt */
    padding: 15px 30px; /* Đệm xung quanh */
    border-radius: 50px; /* Bo tròn viên thuốc */
    border: 1px solid rgba(56, 189, 248, 0.5); /* Viền xanh */
    display: flex; /* Căn icon và chữ */
    align-items: center; /* Căn giữa dọc */
    gap: 10px; /* Khoảng cách icon */
    animation: pulse 2s infinite; /* Hiệu ứng nhịp đập */
}
@keyframes pulse {
    0% { transform: scale(1); } /* Kích thước ban đầu */
    50% { transform: scale(1.05); } /* Phóng to nhẹ */
    100% { transform: scale(1); } /* Trở về ban đầu */
}

/* =========================================
   5. BÀN PHÍM ẢO (KEYBOARD VISUAL)
   ========================================= */
.keyboard-container {
    margin-top: 15px; /* [Thu gọn] Kéo gần lên trên */
    background: rgba(15, 23, 42, 0.6);
    padding: 15px; /* [Thu gọn] Giảm đệm */
    border-radius: 20px; /* Bo góc */
    border: 1px solid rgba(255,255,255,0.05); /* Viền mờ */
    display: flex; /* Flexbox */
    flex-direction: column; /* Xếp hàng dọc */
    gap: 6px; /* Khoảng cách các hàng phím */
    align-items: center; /* Căn giữa bàn phím */
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    user-select: none;
}

.keyboard-row {
    display: flex; /* Xếp phím ngang */
    gap: 6px; /* Khoảng cách giữa các phím */
}

.key {
    min-width: 40px; height: 40px; /* [Thu gọn] Phím nhỏ hơn chút */
    background: rgba(30, 41, 59, 0.8);
    border-bottom: 3px solid rgba(0,0,0,0.4); /* Hiệu ứng 3D */
    border-radius: 6px;
    color: #94a3b8; /* Màu chữ phím */
    display: flex; /* Căn giữa chữ */
    align-items: center; /* Căn giữa dọc */
    justify-content: center; /* Căn giữa ngang */
    font-weight: 600; /* Chữ đậm */
    font-size: 0.8rem; /* [Thu gọn] Cỡ chữ nhỏ hơn */
    transition: all 0.1s ease;
    text-transform: uppercase; /* Chữ in hoa */
    position: relative;
}

/* Màu chỉ dẫn ngón tay (Finger Zones) */
.key[data-finger="1"] { border-top: 2px solid #f87171; } /* Út Trái - Đỏ */
.key[data-finger="2"] { border-top: 2px solid #fbbf24; } /* Áp Út Trái - Vàng */
.key[data-finger="3"] { border-top: 2px solid #4ade80; } /* Giữa Trái - Xanh lá */
.key[data-finger="4"] { border-top: 2px solid #38bdf8; } /* Trỏ Trái - Xanh dương */
.key[data-finger="5"] { border-top: 2px solid #a8a29e; } /* Ngón Cái - Xám */
.key[data-finger="6"] { border-top: 2px solid #38bdf8; } /* Trỏ Phải */
.key[data-finger="7"] { border-top: 2px solid #4ade80; } /* Giữa Phải */
.key[data-finger="8"] { border-top: 2px solid #fbbf24; } /* Áp Út Phải */
.key[data-finger="9"] { border-top: 2px solid #f87171; } /* Út Phải */

.key.active {
    background: #38bdf8; /* Nền sáng khi active */
    color: #0f172a;
    border-bottom-width: 0px; /* Nhấn xuống */
    transform: translateY(3px);
    box-shadow: 0 0 15px rgba(56, 189, 248, 0.6);
    border-color: transparent;
}

/* Kích thước các phím đặc biệt */
.key.backspace { width: 70px; font-size: 0.7rem; }
.key.tab { width: 50px; font-size: 0.7rem; align-items: flex-end; padding-bottom: 8px; }
.key.caps { width: 60px; font-size: 0.7rem; align-items: flex-start; padding-top: 8px; }
.key.enter { width: 70px; font-size: 0.7rem; }
.key.shift { width: 80px; font-size: 0.7rem; }
.key.space { width: 250px; }

/* --- HANDS VISUAL (Mới) --- */
.hands-wrapper {
    display: flex;
    justify-content: center;
    gap: 80px; /* [Thu gọn] 2 tay gần nhau hơn */
    margin-top: 10px;
    transform: scale(0.8); /* [Thu gọn] Thu nhỏ toàn bộ bàn tay */
    transform-origin: top center;
    margin-bottom: -30px; /* Kéo phần dưới lên */
}

.hand {
    display: flex;
    gap: 6px;
    align-items: flex-end; /* Căn đáy các ngón tay */
}

.finger {
    width: 14px;
    background: rgba(255,255,255,0.1);
    border-radius: 10px 10px 0 0;
    transition: all 0.2s;
    position: relative;
}

/* Chiều cao mô phỏng ngón tay */
.finger.pinky { height: 35px; }
.finger.ring { height: 50px; }
.finger.middle { height: 60px; }
.finger.index { height: 50px; }
.finger.thumb { height: 30px; width: 18px; transform: rotate(15deg); margin-left: 5px; background: rgba(255,255,255,0.15); }

/* Tay trái (Thumb xoay ngược lại) */
.hand.left .finger.thumb { transform: rotate(-15deg); margin-left: 0; margin-right: 5px; }

/* Hiệu ứng khi ngón tay active */
.finger.active {
    background: #38bdf8;
    box-shadow: 0 0 15px #38bdf8;
    transform: scaleY(1.1); /* Dài ra chút khi nhấn */
}
/* Màu riêng cho từng ngón khi active (trùng màu phím) */
.finger.pinky.active { background: #f87171; box-shadow: 0 0 15px #f87171; }
.finger.ring.active { background: #fbbf24; box-shadow: 0 0 15px #fbbf24; }
.finger.middle.active { background: #4ade80; box-shadow: 0 0 15px #4ade80; }
.finger.index.active { background: #38bdf8; box-shadow: 0 0 15px #38bdf8; }
.finger.thumb.active { background: #a8a29e; box-shadow: 0 0 15px #a8a29e; }

/* =========================================
   6. LESSON DASHBOARD (GIAO DIỆN CHỌN BÀI)
   ========================================= */
.lesson-dashboard {
    display: flex; /* Flexbox */
    flex-direction: column; /* Xếp dọc các section */
    gap: 40px; /* Khoảng cách giữa các section */
    animation: fadeInDown 0.5s ease; /* Hiệu ứng hiện ra */
}

.lesson-section {
    background: rgba(30, 41, 59, 0.3); /* Nền bao quanh section */
    border-radius: 20px; /* Bo góc */
    padding: 30px; /* Đệm trong */
}

.section-title {
    font-size: 1.8rem; /* Cỡ chữ tiêu đề */
    font-weight: 700; /* Chữ đậm */
    color: white; /* Màu trắng */
    margin-bottom: 25px; /* Khoảng cách dưới */
    padding-bottom: 10px; /* Đệm dưới */
    border-bottom: 1px solid rgba(255,255,255,0.1); /* Gạch chân mờ */
    display: inline-block; /* Chỉ chiếm chiều rộng nội dung */
}

.section-grid {
    display: grid; /* Grid layout */
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); /* Tự động chia cột */
    gap: 20px; /* Khoảng cách các thẻ */
}

/* Card bài học */
.lesson-card {
    background: rgba(30, 41, 59, 0.7); /* Nền card */
    border: 1px solid rgba(255,255,255,0.08); /* Viền card */
    border-radius: 16px; /* Bo góc */
    padding: 25px; /* Đệm trong */
    cursor: pointer; /* Con trỏ tay */
    transition: all 0.3s ease; /* Hiệu ứng hover */
    display: flex; /* Flexbox */
    flex-direction: column; /* Xếp dọc nội dung */
    gap: 15px; /* Khoảng cách icon và chữ */
}

.lesson-card:hover {
    transform: translateY(-5px); /* Nổi lên khi hover */
    border-color: #38bdf8; /* Viền xanh */
    background: rgba(30, 41, 59, 0.9); /* Nền đậm hơn */
    box-shadow: 0 10px 30px rgba(0,0,0,0.3); /* Đổ bóng */
}

.card-header {
    display: flex; /* Flexbox */
    justify-content: space-between; /* Icon và sao ở 2 đầu */
    align-items: center; /* Căn giữa dọc */
}
.lesson-icon { font-size: 1.8rem; color: #38bdf8; } /* Icon xanh */
.lesson-stars { color: #facc15; font-size: 0.8rem; } /* Sao vàng */

.lesson-info h3 { font-size: 1.1rem; color: #e2e8f0; margin-bottom: 5px; } /* Tiêu đề bài */
.lesson-info p { font-size: 0.9rem; color: #94a3b8; } /* Mô tả bài */

/* =========================================
   7. MODALS & RESULT OVERLAY
   ========================================= */
/* Result Overlay */
.result-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; /* Phủ toàn màn hình */
    background: rgba(10, 38, 71, 0.9); /* Nền xanh đen đậm */
    backdrop-filter: blur(10px); /* Làm mờ nền sau */
    z-index: 2000; /* Lớp cao nhất */
    display: flex; /* Flexbox */
    align-items: center; justify-content: center; /* Căn giữa nội dung */
    opacity: 0; pointer-events: none; /* Ẩn mặc định */
    transition: 0.3s; /* Hiệu ứng ẩn hiện */
}
.result-overlay.active { opacity: 1; pointer-events: auto; } /* Hiện khi active */

.result-card {
    background: rgba(30, 41, 59, 0.8); /* Nền card kết quả */
    border: 1px solid rgba(56, 189, 248, 0.3); /* Viền xanh */
    padding: 50px; border-radius: 30px; /* Đệm và bo góc lớn */
    text-align: center; /* Căn giữa chữ */
    box-shadow: 0 0 50px rgba(56, 189, 248, 0.2); /* Đổ bóng xanh tỏa ra */
    transform: scale(0.9); transition: 0.3s; /* Thu nhỏ nhẹ */
}
.result-overlay.active .result-card { transform: scale(1); } /* Phóng to khi hiện */

/* --- STAR RATING (Mới) --- */
#resultStars {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
}

#resultStars i {
    font-size: 3.5rem;
    color: rgba(255, 255, 255, 0.1); /* Màu sao rỗng */
    opacity: 0;
    animation: starPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

#resultStars i.active {
    color: #facc15; /* Màu vàng */
    text-shadow: 0 0 25px rgba(250, 204, 21, 0.6);
}

@keyframes starPop { from { transform: scale(0) rotate(-45deg); opacity: 0; } to { transform: scale(1) rotate(0); opacity: 1; } }
/* ------------------------- */

.result-stats {
    display: flex; /* Flexbox */
    gap: 40px; /* Khoảng cách 2 chỉ số */
    justify-content: center; /* Căn giữa */
    margin: 30px 0; /* Khoảng cách trên dưới */
}
.big-num { font-size: 4rem; font-weight: 800; color: #38bdf8; line-height: 1; } /* Số to */
.res-item span { color: #94a3b8; font-size: 1rem; text-transform: uppercase; } /* Chữ nhỏ */

/* Khu vực nút bấm kết quả */
.result-actions {
    display: flex; /* Flexbox */
    flex-direction: column; /* Xếp dọc: Nút to trên, nhỏ dưới */
    align-items: center; /* Căn giữa ngang */
    gap: 25px; /* Khoảng cách hàng */
    margin-top: 30px; /* Cách phần thống kê */
    width: 100%; /* Chiều rộng full */
}

/* Hàng nút chính (Next Lesson) */
.primary-action {
    display: flex; /* Flexbox */
    justify-content: center; /* Căn giữa */
    width: 100%; /* Full rộng */
}

/* Nút chính (Start/Next) */
.cta-button {
    background: #38bdf8; color: #0f172a; /* Nền xanh chữ tối */
    padding: 13px 120px; /* Đệm nút lớn */
    border: none; border-radius: 50px; /* Bo tròn */
    font-size: 1.2rem; font-weight: 700; /* Chữ to đậm */
    cursor: pointer; transition: 0.3s; /* Hiệu ứng */
    box-shadow: 0 5px 20px rgba(56, 189, 248, 0.4); /* Bóng xanh */
    min-width: 250px; /* Chiều rộng tối thiểu cố định */
    display: flex; justify-content: center; align-items: center; /* Căn giữa chữ */
    margin: 0 !important; /* Bắt buộc bỏ margin ngoài */
}
.cta-button:hover {
    transform: translateY(-3px); /* Nổi lên */
    box-shadow: 0 10px 30px rgba(56, 189, 248, 0.5); /* Bóng đậm hơn */
}

/* Hàng nút phụ (Retry - Menu) */
.secondary-actions {
    display: flex; /* Flexbox */
    justify-content: center; /* Căn giữa */
    gap: 20px; /* Khoảng cách giữa 2 nút */
    width: 100%; /* Full rộng */
    margin-top: 10px; /* Khoảng cách với nút trên */
}

/* Nút phụ */
.btn-secondary {
    background: transparent; color: #cbd5e1; /* Nền trong suốt */
    border: 1px solid rgba(255,255,255,0.2); /* Viền mờ */
    padding: 12px 25px; border-radius: 50px; /* Đệm và bo tròn */
    font-weight: 600; cursor: pointer; transition: 0.3s; /* Style chữ và hiệu ứng */
    flex: 1; /* Chia đều không gian */
    max-width: 250px; /* Giới hạn chiều rộng */
    display: flex; justify-content: center; align-items: center; /* Căn giữa chữ */
    margin: 0 !important; /* Bắt buộc bỏ margin ngoài */
}
.btn-secondary:hover { background: rgba(255,255,255,0.1); color: white; } /* Hover sáng nền */

/* Modal Chung (Custom & Time) */
.modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; /* Phủ màn hình */
    background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); /* Nền tối mờ */
    z-index: 1500; /* Lớp cao */
    display: flex; align-items: center; justify-content: center; /* Căn giữa modal */
    opacity: 0; visibility: hidden; transition: 0.3s; /* Ẩn mặc định */
}
.modal.active { opacity: 1; visibility: visible; } /* Hiện khi active */

.modal-content {
    background: #1e293b; /* Nền modal */
    border: 1px solid rgba(255,255,255,0.1); /* Viền mờ */
    padding: 30px; border-radius: 20px; /* Đệm và bo góc */
    width: 90%; max-width: 500px; /* Kích thước giới hạn */
    box-shadow: 0 20px 50px rgba(0,0,0,0.5); /* Đổ bóng lớn */
    text-align: center; /* Căn giữa chữ */
    display: flex; flex-direction: column; align-items: center; /* Xếp dọc nội dung */
}
.modal-content h3 { color: white; margin-bottom: 20px; font-size: 1.5rem; } /* Tiêu đề modal */

.custom-textarea {
    width: 100%; height: 150px; /* Kích thước vùng nhập */
    background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); /* Style nền viền */
    color: white; padding: 15px; border-radius: 10px; /* Chữ và đệm */
    margin-bottom: 20px; resize: none; font-family: inherit; /* Bỏ kéo giãn */
}
.custom-textarea:focus { border-color: #38bdf8; outline: none; } /* Focus viền xanh */

/* Khu vực chọn giờ nhanh */
.quick-select-container {
    display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; /* Flex ngang */
}
.quick-btn {
    background: rgba(255,255,255,0.05); border: none; /* Nền nút */
    color: #cbd5e1; padding: 10px 20px; border-radius: 8px; /* Style chữ */
    cursor: pointer; transition: 0.2s; font-weight: 600; /* Hiệu ứng */
}
.quick-btn.active, .quick-btn:hover { background: #38bdf8; color: #0f172a; } /* Active xanh */

/* Ô nhập giờ thủ công */
.styled-time-input {
    background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); /* Nền viền */
    color: #38bdf8; font-size: 2rem; font-weight: bold; /* Style chữ to */
    text-align: center; width: 150px; padding: 10px; border-radius: 10px; /* Kích thước */
    margin: 10px auto 10px auto; display: block; /* Căn giữa block */
}

/* Nút bấm trong Modal (Cancel/Start) */
.modal-btns {
    display: flex; /* Flexbox */
    justify-content: center; /* Căn giữa ngang */
    align-items: center; /* Căn giữa dọc */
    gap: 25px; /* Khoảng cách nút */
    margin-top: 25px; /* Cách phần trên */
    width: 100%; /* Full rộng */
    padding: 7px 32px; /* Đệm nút lớn */
}